{% extends 'base.html' %}
{% block page_title %}Session Report{% endblock %}
{% block content %}
<div class="row g-3 mb-4">
<div class="col-md-3"><div class="stat-card" style="--accent:#818cf8;padding:16px;"><div class="num" style="font-size:28px;">{{ session.total_students }}</div><div class="label">Total</div></div></div>
<div class="col-md-3"><div class="stat-card" style="--accent:#10b981;padding:16px;"><div class="num" style="font-size:28px;color:#10b981;">{{ session.present_count }}</div><div class="label">Present</div></div></div>
<div class="col-md-3"><div class="stat-card" style="--accent:#ef4444;padding:16px;"><div class="num" style="font-size:28px;color:#ef4444;">{{ session.absent_count }}</div><div class="label">Absent</div></div></div>
<div class="col-md-3"><div class="stat-card" style="--accent:#8B0000;padding:16px;"><div class="num" style="font-size:28px;color:var(--gold);">{{ session.percentage }}%</div><div class="label">Attendance Rate</div></div></div>
</div>
<div class="glass-card">
<div class="card-head" style="justify-content:space-between;">
<span><i class="fas fa-file-alt"></i> {{ session.course.name }} | {{ session.date }} | Sec {{ session.section }}</span>
<span>{% if session.mode == 'face' %}<span class="badge-face">Face AI</span>{% elif session.mode == 'both' %}<span class="badge-face">Both</span>{% else %}<span class="badge-manual">Manual</span>{% endif %}</span>
</div>
<table class="smart-table">
<thead><tr><th>#</th><th>Student</th><th>Roll No</th><th>Status</th><th>Method</th><th>Confidence</th></tr></thead>
<tbody>{% for r in records %}
<tr>
<td style="color:var(--text-muted);">{{ forloop.counter }}</td>
<td>{% if r.student.photo %}<img src="{{ r.student.photo.url }}" class="student-avatar me-2">{% else %}<span class="student-avatar-placeholder me-2">{{ r.student.name|first }}</span>{% endif %}<strong style="color:white;">{{ r.student.name }}</strong></td>
<td><code style="color:var(--gold);">{{ r.student.roll_number }}</code></td>
<td><span class="badge-{{ r.status }}">{{ r.status|capfirst }}</span></td>
<td>{% if r.method == 'face' %}<span class="badge-face"><i class="fas fa-face-smile-wink me-1"></i>Face AI</span>{% else %}<span class="badge-manual">Manual</span>{% endif %}</td>
<td style="color:var(--text-muted);font-size:13px;">{% if r.face_confidence %}{{ r.face_confidence }}%{% else %}â€”{% endif %}</td>
</tr>{% endfor %}
</tbody></table>
</div>
{% endblock %}
