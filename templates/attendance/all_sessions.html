{% extends 'base.html' %}
{% block page_title %}All Sessions{% endblock %}
{% block topbar_actions %}<a href="{% url 'create_session' %}" class="btn-maroon" style="padding:8px 16px;font-size:13px;"><i class="fas fa-plus me-2"></i>New Session</a>{% endblock %}
{% block content %}
<div class="glass-card mb-4"><div class="card-body-pad" style="padding:16px 24px;">
<form method="get" class="d-flex gap-3">
<input type="date" name="date" class="form-control" value="{{ date_filter }}" style="max-width:180px;">
<select name="course" class="form-control" style="max-width:240px;"><option value="">All Courses</option>{% for c in courses %}<option value="{{ c.id }}" {% if course_filter == c.id|stringformat:"s" %}selected{% endif %}>{{ c.code }}</option>{% endfor %}</select>
<button type="submit" class="btn-maroon" style="padding:10px 20px;">Filter</button>
<a href="{% url 'all_sessions' %}" class="btn-ghost" style="padding:10px 16px;">Clear</a>
</form></div></div>
<div class="glass-card">
<div class="card-head"><i class="fas fa-calendar-check"></i> Sessions</div>
<table class="smart-table">
<thead><tr><th>Course</th><th>Date</th><th>Section</th><th>Faculty</th><th>Present</th><th>Absent</th><th>Mode</th><th>Actions</th></tr></thead>
<tbody>{% for s in sessions %}
<tr>
<td><strong style="color:white;">{{ s.course.code }}</strong><br><span style="font-size:11px;color:var(--text-muted);">{{ s.course.name }}</span></td>
<td style="color:var(--text-muted);">{{ s.date }}</td>
<td><span style="background:var(--surface3);padding:3px 10px;border-radius:6px;font-size:12px;">{{ s.section }}</span></td>
<td style="font-size:13px;">{{ s.faculty.name }}</td>
<td><span class="badge-present">{{ s.present_count }}</span></td>
<td><span class="badge-absent">{{ s.absent_count }}</span></td>
<td>{% if s.mode == 'face' %}<span class="badge-face">Face AI</span>{% elif s.mode == 'both' %}<span class="badge-face">Both</span>{% else %}<span class="badge-manual">Manual</span>{% endif %}</td>
<td><a href="{% url 'session_report' s.pk %}" class="btn-ghost" style="padding:5px 12px;font-size:12px;">Report</a></td>
</tr>{% empty %}
<tr><td colspan="8" style="text-align:center;color:var(--text-muted);padding:50px;">No sessions found.</td></tr>
{% endfor %}</tbody>
</table></div>
{% endblock %}
